<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Popix</title>
    <!-- Link to Google Fonts for the "Poppins" font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <!-- Link to External CSS -->
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDKs -->
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <!-- Firebase Analytics -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>
    <!-- Firebase Realtime Database -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
    <div id="mainContainer">
        <!-- Left Panel: Leaderboard -->
        <div id="leftPanel">
            <img id="leaderboardBanner" src="images/PopixBanner.jpg" alt="Leaderboard Banner">
            <div id="leaderboard">
                <h2>Leaderboard Level <span id="leaderboardLevel">1</span></h2>
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Time</th>
                            <th>Clicks</th>
                            <th>Misses</th> <!-- New Column -->
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <!-- Leaderboard entries will be injected here -->
                    </tbody>
                </table>
            </div>
            <div id="controlsContainer">
                <button id="soundToggleButton" title="Toggle Game Sounds">Sound On</button>
                <button id="resetScoresButton">Reset Scores</button>
                <button id="musicToggleButton" title="Toggle Music">Music On</button>
            </div>
            <div id="paginationControls">
                <button id="prevPageButton">Previous</button>
                <span id="currentPage">1</span> / <span id="totalPages">1</span>
                <button id="nextPageButton">Next</button>
            </div>
        </div>

        <!-- Right Panel: Game Area -->
        <div id="rightPanel">
            <div id="infoPanel">
                <div>Score: <span id="liveScore">0</span></div>
                <div>Clicks: <span id="clickCount">0</span></div>
                <div>Time: <span id="timeElapsed">0</span></div>
                <div>Combo: x<span id="comboMultiplierDisplay">1.00</span></div>
                <div>Circles Remaining: <span id="circlesRemaining">0</span></div>
                <div>Level: <span id="currentLevel">1</span></div>
            </div>

            <div id="gameButtons">
                <button id="startGameButton">Start Game</button>
                <button id="rulesButton">Rules</button>
            </div>

            <canvas id="gameCanvas" width="800" height="800"></canvas>

            <!-- Overlay Content -->
<div id="buttonOverlay" style="display: none;">
    <div id="overlayContent">
        <div id="endLevelScore">
            <!-- Scores will be injected here by JavaScript -->
        </div>
        <form id="nameForm" style="display: none;">
            <label for="playerName">Enter Your Name:</label>
            <input type="text" id="playerName" name="playerName" required maxlength="20">
            <button type="submit">Submit Score</button>
            <button type="button" id="skipButton">Skip</button>
            <div id="nameFormMessage"></div>
        </form>
        <div id="overlayButtons" style="display: none;">
            <button id="nextLevelButton">Next Level</button>
            <button id="tryAgainButton">Try Again</button>
            <button id="resetGameButton">Reset Game</button>
            <div id="overlayButtonsMessage"></div>
        </div>
    </div>
</div>

<!-- Confirmation Dialog -->
    <div id="confirmationDialog">
        <div id="confirmationDialogContent">
            <p>Are you sure you want to reset the game?</p>
            <button id="confirmYesButton">Yes</button>
            <button id="confirmNoButton">No</button>
        </div>
    </div>

    <!-- Rules Modal -->
    <div id="rulesModal" style="display: none;">
        <div id="rulesContent">
            <button id="closeRulesButton">&times;</button>
            <h2>Game Rules & Features</h2>
            <p>
                Welcome to Popix! Your goal is to click on moving circles to earn points. Each successful click increases your score and combo multiplier.
                <br><br>
                <strong>Quick Pops Bonus:</strong> Popping circles quickly increases your combo multiplier more than popping them slowly.
                <br><br>
                <strong>Missed Click Penalty:</strong> A missed click decreases your multiplier by 0.1, but it won't go below 1.
                <br><br>
                <strong>Score Decay:</strong> Your score will decrease by 2% every 2 seconds during gameplay. Ensure you click as quickly and accurately as possible!
                <br><br>
                As you progress through levels, circles may subdivide into smaller, faster-moving ones, increasing the challenge.
                <br><br>
                Keep track of your time and clicks to optimize your performance. Strive to achieve the highest score possible by balancing speed and accuracy. Utilize the leaderboard to compare your achievements with other players. Good luck and enjoy the game!
            </p>
        </div>
    </div>

    <!-- Link to External JavaScript -->
    <script src="script.js"></script>
</body>
</html>